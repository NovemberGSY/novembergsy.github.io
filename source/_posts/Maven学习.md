### Maven

#### 1、什么是Maven？

  Maven是一个项目管理工具，生成报告（日志文件？）和文档的***Java***项目管理工具，对项目进行构建，依赖管理。（由Apache开发）

  将项目开发和管理过程抽象成一个项目对象模型（POM） ，开发人员只需要做一些简单的配置，就可以批量完成项目的构建，报告和文档的生产工具

<img src="/Users/louwenbo/Library/Application Support/typora-user-images/image-20200923124400208.png" alt="image-20200923124400208" style="zoom:50%;" />

  Alfred在2020年暑期实习期间，做的项目都是基于Maven开发的Web应用（使用SpringMVC开发的Tdogg网上家具商城，Spring Boot开发的Roc鲲鹏航空购票系统）

#### 2、Maven能够做什么？

- ##### Maven能够帮助开发者完成一下工作：

  - 构建
  - 文档生成
  - 报告
  - 依赖
  - SCMs（?）
  - 发布
  - 分发
  - 邮件列表

- #####  不使用Maven的情景：

  一个开发团队需要做大量的前期准备：

  1. 确定构架

  2. 收集框架相关的jar包

  3. 搭建相应框架（SSH、SSM等）

  4. 编写测试代码

  5. 寻找框架依赖的jar包

  6. 剔除冲突的jar包

  7. 制定相关文档

     ......

  以上内容繁琐，需要做非常充分的准备，一只开发团队每承接一个项目，都需要做这一些繁琐的事情，这些事情耗时耗力，又缺少技术含量。

- ##### Maven登场，发挥作用：

1.   Maven统一集中管理好素有的依赖包，不需要程序员再去寻找
2. 对应的第三方组件用到的jar，Maven自动解决重复和冲突问题。
3. Maven作为开放的框架，提供公共接口，方便同第三方插件集成。程序员可以将自己需要的插件，动态的集成到Maven，从而扩展新的管理功能。
4. Maven可以统一每个项目的构建过程，实现不同项目的兼容性管理

#### 3、Maven的特点

- 项目设置遵循统一的规则。
- 任意工程中共享。
- 依赖管理包括自动更新。
- 一个庞大且不断增长的库。
- 可扩展，能够轻松编写 Java 或脚本语言的插件。
- 只需很少或不需要额外配置即可即时访问新功能。
- **基于模型的构建** − Maven能够将任意数量的项目构建到预定义的输出类型中，如 JAR，WAR 或基于项目元数据的分发，而不需要在大多数情况下执行任何脚本。
- **项目信息的一致性站点** − 使用与构建过程相同的元数据，Maven 能够生成一个网站或PDF，包括您要添加的任何文档，并添加到关于项目开发状态的标准报告中。
- **发布管理和发布单独的输出** − Maven 将不需要额外的配置，就可以与源代码管理系统（如 Subversion 或 Git）集成，并可以基于某个标签管理项目的发布。它也可以将其发布到分发位置供其他项目使用。Maven 能够发布单独的输出，如 JAR，包含其他依赖和文档的归档，或者作为源代码发布。
- **向后兼容性** − 您可以很轻松的从旧版本 Maven 的多个模块移植到 Maven 3 中。
- 子项目使用父项目依赖时，正常情况子项目应该继承父项目依赖，无需使用版本号，
- **并行构建** − 编译的速度能普遍提高20 - 50 %。
- **更好的错误报告** − Maven 改进了错误报告，它为您提供了 Maven wiki 页面的链接，您可以点击链接查看错误的完整描述。

#### 4、POM——Maven工程的基本工作单元

  **POM(Project Object Model , 项目对象模型)**，本质是XML文件，包含了项目的**基本信息，用于描述项目如何构建，声明项目依赖，等等**。

  执行任务或目标时，Maven会在当前目录中查找POM，读取POM，获取所需的配置信息，然后执行目标。

  POM中可以指定一下配置：

- 项目依赖
- 插件
- 执行目标
- 项目构建 profile
- 项目版本
- 项目开发者列表
- 相关邮件列表信息

  在pom.xml中，可以看到Maven在执行目标时需要用到的默认工程源码目录结构，输出目录，需要的插件，仓库和报表目录。

#### 5、Maven构建生命周期

  一个典型的Maven构建（build）生命周期是由以下几个阶段的序列组成的：

![7642256-c967b2c1faeba9ce](https://www.runoob.com/wp-content/uploads/2018/09/7642256-c967b2c1faeba9ce.png)

| 阶段          | 处理     |                           描述                           |
| :------------ | :------- | :------------------------------------------------------: |
| 验证 validate | 验证项目 |          验证项目是否正确且所有必须信息是可用的          |
| 编译 compile  | 执行编译 |                  源代码编译在此阶段完成                  |
| 测试 Test     | 测试     |      使用适当的单元测试框架（例如JUnit）运行测试。       |
| 包装 package  | 打包     |         创建JAR/WAR包如在 pom.xml 中定义提及的包         |
| 检查 verify   | 检查     |         对集成测试的结果进行检查，以保证质量达标         |
| 安装 install  | 安装     |        安装打包的项目到本地仓库，以供其他项目使用        |
| 部署 deploy   | 部署     | 拷贝最终的工程包到远程仓库中，以共享给其他开发人员和工程 |

（以上表格采用自“菜鸟教程”）

链接：https://www.runoob.com/maven/maven-build-life-cycle.html

这些阶段将被按顺序地执行。
Maven有一下三个标准的生命周期：

- **clean：**项目清理的处理
- **default（或build）：**项目部署的处理
- **site：**项目站点文档创建的处理

##### Clean生命周期

  当我们执行 

```maven
mvn post-clean 命令时
```

Maven调用 clean 生命周期，它包含以下阶段：

- Pre-clean : 执行一些需要在clean之前完成的工作
- clean：移除所有上一次构建生成的文件
- post-clean：执行一些需要在clean之后立刻完成的工作



